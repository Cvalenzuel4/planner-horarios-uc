@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   THEME TOKENS - Light/Dark Mode Support
   ============================================ */
:root {
  /* Semantic color tokens (HSL values without hsl() wrapper) */
  --background: 220 14% 96%;
  /* gray-100 */
  --surface: 0 0% 100%;
  /* white */
  --surface-hover: 220 14% 96%;
  /* gray-100 */
  --foreground: 224 71% 4%;
  /* gray-900 */
  --muted: 220 9% 46%;
  /* gray-500 */
  --muted-foreground: 218 11% 65%;
  /* gray-400 */
  --border: 220 13% 91%;
  /* gray-200 */
  --ring: 24 95% 53%;
  /* orange-500 */
  --primary: 24 95% 53%;
  /* orange-500 */
  --primary-foreground: 0 0% 100%;
  /* white */

  /* Colores institucionales */
  --color-primary: #EA580C;
  --color-primary-hover: #C2410C;
  --color-institutional: #003366;

  /* Colores de actividad (para leyenda) */
  --color-catedra: #F59E0B;
  --color-laboratorio: #0EA5E9;
  --color-ayudantia: #10B981;
  --color-taller: #8B5CF6;
  --color-terreno: #EA580C;
  --color-practica: #EF4444;
  --color-otro: #6B7280;
  --color-conflicto: #EF4444;
}

.dark {
  /* Dark theme semantic tokens */
  --background: 224 71% 4%;
  /* gray-950 */
  --surface: 220 14% 10%;
  /* gray-900 */
  --surface-hover: 220 14% 14%;
  /* gray-800 */
  --foreground: 210 40% 98%;
  /* gray-50 */
  --muted: 218 11% 65%;
  /* gray-400 */
  --muted-foreground: 220 9% 46%;
  /* gray-500 */
  --border: 217 19% 27%;
  /* gray-700 */
  --ring: 24 95% 53%;
  /* orange-500 */
  --primary: 24 95% 53%;
  /* orange-500 */
  --primary-foreground: 0 0% 100%;
  /* white */
}

/* Reset básico */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
  @apply bg-gray-100 dark:bg-gray-950;
  min-height: 100vh;
  @apply text-gray-900 dark:text-gray-50;
}

/* Estilos del scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  @apply bg-gray-200 dark:bg-gray-800;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  @apply bg-gray-400 dark:bg-gray-600;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  @apply bg-gray-500 dark:bg-gray-500;
}

/* Animación de conflicto */
@keyframes pulseConflict {

  0%,
  100% {
    box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7);
  }

  50% {
    box-shadow: 0 0 0 6px rgba(239, 68, 68, 0);
  }
}

.animate-conflict {
  animation: pulseConflict 1s ease-in-out infinite;
  border: 2px solid var(--color-conflicto);
}

/* ============================================
   UI COMPONENTS - With Dark Mode Support
   ============================================ */

/* Clean UI panels */
.glass-panel {
  @apply bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-2xl shadow-sm dark:shadow-lg;
}

.glass-panel-dark {
  @apply bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 rounded-none shadow-sm;
}

/* Botón primario - Orange CTA */
.btn-primary {
  @apply px-4 py-2 bg-orange-600 text-white font-medium rounded-lg hover:bg-orange-700 transition-all duration-200 shadow-sm hover:shadow-md active:scale-95;
}

/* Botón secundario */
.btn-secondary {
  @apply px-4 py-2 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200 font-medium rounded-lg border border-gray-200 dark:border-gray-600 transition-all duration-200 hover:border-gray-300 dark:hover:border-gray-500 active:scale-95;
}

/* Botón de peligro */
.btn-danger {
  @apply px-4 py-2 bg-red-500 hover:bg-red-600 text-white font-medium rounded-lg transition-all duration-200 active:scale-95;
}

/* Input estilizado */
.input-styled {
  @apply w-full px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-500/20 transition-all duration-200;
}

/* Select estilizado */
.select-styled {
  @apply px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-gray-100 focus:outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-500/20 transition-all duration-200 cursor-pointer appearance-none;
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236B7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
  background-position: right 0.5rem center;
  background-repeat: no-repeat;
  background-size: 1.5em 1.5em;
  padding-right: 2.5rem;
}

.select-styled option {
  @apply bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100;
}

/* Celda del grid */
.grid-cell {
  @apply relative min-h-[60px] border border-gray-100 dark:border-gray-700 rounded-lg transition-all duration-150 hover:border-gray-200 dark:hover:border-gray-600 bg-gray-50/50 dark:bg-gray-800/50;
}

.grid-cell-header {
  @apply bg-white dark:bg-gray-800 font-semibold text-gray-700 dark:text-gray-200 text-center py-3 text-sm border border-gray-100 dark:border-gray-700 rounded-lg;
}

/* Bloque de horario */
.schedule-block {
  @apply absolute inset-1 rounded-md flex flex-col justify-center items-center text-xs font-medium shadow-sm transition-transform duration-150 hover:scale-[1.02] hover:z-10 cursor-pointer;
}

/* Checkbox estilizado */
.checkbox-styled {
  @apply w-5 h-5 rounded border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 checked:bg-orange-500 checked:border-orange-500 focus:ring-2 focus:ring-orange-500/30 focus:ring-offset-0 transition-all duration-150 cursor-pointer;
}

/* Tooltip */
.tooltip {
  @apply invisible opacity-0 absolute z-50 px-3 py-2 text-xs font-medium bg-gray-900 dark:bg-gray-700 text-white rounded-lg shadow-lg transition-all duration-200;
}

.tooltip-trigger:hover .tooltip {
  @apply visible opacity-100;
}

/* Modal overlay */
.modal-overlay {
  @apply fixed inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm z-40 flex items-center justify-center p-4;
}

/* Modal content */
.modal-content {
  @apply bg-white dark:bg-gray-900 rounded-2xl shadow-xl border border-gray-200 dark:border-gray-700 max-w-2xl w-full max-h-[90vh] overflow-y-auto;
}

/* Badge */
.badge {
  @apply inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium;
}

/* Transiciones suaves para paneles colapsables */
.collapsible-content {
  @apply transition-all duration-300 ease-in-out;
}

/* Loader */
.loader {
  @apply w-8 h-8 border-4 border-gray-200 dark:border-gray-700 border-t-orange-500 rounded-full animate-spin;
}

/* ============================================
   RESPONSIVE DESIGN
   ============================================ */

/* Mejoras para dispositivos táctiles */
@media (hover: none) and (pointer: coarse) {

  .btn-primary,
  .btn-secondary,
  .btn-danger {
    @apply min-h-[44px] min-w-[44px];
  }

  .checkbox-styled {
    @apply w-6 h-6;
  }

  ::-webkit-scrollbar {
    width: 12px;
    height: 12px;
  }
}

/* Móviles pequeños (< 640px) */
@media (max-width: 639px) {
  .grid-cell {
    @apply min-h-[45px];
  }

  .grid-cell-header {
    @apply py-1.5 text-xs;
  }

  .schedule-block {
    @apply text-[8px];
  }

  .schedule-block span {
    @apply leading-tight;
  }

  .modal-content {
    @apply max-h-[95vh] mx-2;
  }
}

/* Tablets (640px - 1024px) */
@media (min-width: 640px) and (max-width: 1023px) {
  .grid-cell {
    @apply min-h-[50px];
  }

  .schedule-block {
    @apply text-[9px];
  }
}

/* Mejoras de accesibilidad para focus en móvil */
@media (max-width: 1023px) {

  button:focus-visible,
  input:focus-visible,
  select:focus-visible {
    @apply outline-2 outline-offset-2 outline-orange-500;
  }
}

/* Animaciones reducidas para preferencia del usuario */
@media (prefers-reduced-motion: reduce) {

  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }

  .animate-conflict {
    animation: none;
  }
}

/* Safe area para dispositivos con notch */
@supports (padding: max(0px)) {
  .glass-panel-dark {
    padding-left: max(1rem, env(safe-area-inset-left));
    padding-right: max(1rem, env(safe-area-inset-right));
  }
}